{% extends 'job_seeker/base.html'%}
{% load custom_tags %}
{% load static %}
{% block content %} 
<div class='max-w-screen-xl items-center justify-between mx-auto p-4'>
      {% if job %}
        {% if messages %}
                {% for message in messages %}
                    {% if message.tags == 'error' %} 
                    <div id="alert-{{forloop.counter}}" class="p-4 mb-4 text-sm text-red-800 rounded-lg bg-red-50 dark:bg-gray-800 dark:text-red-400" role="alert">
                    <span class="font-medium">Error!</span> {{message}}.
                    <button type="button" class="ms-auto -mx-1.5 -my-1.5 bg-red-50 text-red-500 rounded-lg focus:ring-2 focus:ring-red-400 p-1.5 hover:bg-red-200 inline-flex items-center justify-center h-8 w-8 dark:bg-gray-800 dark:text-red-400 dark:hover:bg-gray-700" data-dismiss-target="#alert-{{forloop.counter}}" aria-label="Close">
                        <span class="sr-only">Close</span>
                        <svg class="w-3 h-3" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 14 14">
                        <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"/>
                        </svg>
                    </button>
                    </div>
                    {% endif %}
                    {% if message.tags == 'success' %} 
                    <div id="alert-{{forloop.counter}}" class="p-4 mb-4 text-sm text-blue-800 rounded-lg bg-blue-50 dark:bg-gray-800 dark:text-blue-400" role="alert">
                    <span class="font-medium">Success!</span> {{message}}.
                    <button type="button" class="ms-auto -mx-1.5 -my-1.5 bg-blue-50 text-blue-500 rounded-lg focus:ring-2 focus:ring-blue-400 p-1.5 hover:bg-blue-200 inline-flex items-center justify-center h-8 w-8 dark:bg-gray-800 dark:text-blue-400 dark:hover:bg-gray-700" data-dismiss-target="#alert-{{forloop.counter}}" aria-label="Close">
                        <span class="sr-only">Close</span>
                        <svg class="w-3 h-3" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 14 14">
                        <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"/>
                        </svg>
                    </button>
                    </div>
                    {% endif %}
                {% endfor %}
          {% endif %}
          <div class="m-5 lg:w-full md:w-1/2 sm:w-full">
            <div class="group mx-2 mt-10 max-w-screen-md overflow-hidden rounded-lg border py-8 text-gray-700 shadow transition hover:shadow-lg sm:mx-auto">
              <div class="px-4 py-2">
                <h2 class="text-xl font-semibold text-gray-900">{{ job.title }}</h2>
                <p class="mt-2 text-sm text-gray-600">{{ job.description }}</p>
              </div>
              <div class="mt-4 px-4 py-2 flex flex-wrap items-center justify-start text-sm text-gray-500">
                <div class="flex items-center mr-4 mb-2">
                  <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 mr-1 text-green-600" viewBox="0 0 20 20" fill="currentColor">
                    <path fill-rule="evenodd" d="M10 2a8 8 0 100 16 8 8 0 000-16zM4 10a6 6 0 1112 0 6 6 0 01-12 0z" clip-rule="evenodd" />
                    <path d="M10 4a6 6 0 00-6 6h12a6 6 0 00-6-6z" />
                  </svg>
                  <span>{{ job.experience_years }} years {{ job.experience_months }} months</span>
                </div>
                <div class="flex flex-wrap items-center">
                  <span class="mr-2">Skills:</span>
                  {% for skill in job.skills.all %}
                    <span class="mr-2 mb-2 rounded-lg bg-blue-100 px-2 py-0.5 text-blue-900">{{ skill }}</span>
                  {% endfor %}
                </div>
              </div>
              <div class="mt-4 px-4 py-2 flex flex-wrap items-center justify-start">
                <span class="max-w-40 truncate whitespace-nowrap inline-block py-1.5 px-3 rounded-lg text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-800/30 dark:text-blue-500">POSTED BY</span>
              </div>
              <div class="mt-4 px-4 py-2 flex flex-wrap items-center justify-start">
                <div class="flex items-center">
                  <span class="inline-block size-[62px] bg-gray-100 rounded-full overflow-hidden">
                    <svg class="size-full text-gray-300" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <rect x="0.62854" y="0.359985" width="15" height="15" rx="7.5" fill="white"></rect>
                      <path d="M8.12421 7.20374C9.21151 7.20374 10.093 6.32229 10.093 5.23499C10.093 4.14767 9.21151 3.26624 8.12421 3.26624C7.0369 3.26624 6.15546 4.14767 6.15546 5.23499C6.15546 6.32229 7.0369 7.20374 8.12421 7.20374Z" fill="currentColor"></path>
                      <path d="M11.818 10.5975C10.2992 12.6412 7.42106 13.0631 5.37731 11.5537C5.01171 11.2818 4.69296 10.9631 4.42107 10.5975C4.28982 10.4006 4.27107 10.1475 4.37419 9.94123L4.51482 9.65059C4.84296 8.95684 5.53671 8.51624 6.30546 8.51624H9.95231C10.7023 8.51624 11.3867 8.94749 11.7242 9.62249L11.8742 9.93184C11.968 10.1475 11.9586 10.4006 11.818 10.5975Z" fill="currentColor"></path>
                    </svg>
                  </span>
                  <div class="ms-3">
                    <h3 class="font-semibold text-gray-800 dark:text-white">{{job.created_by.first_name}} {{job.created_by.last_name}}</h3>
                    <p class="text-sm font-medium text-gray-400 dark:text-neutral-500">{{job.created_by.email}}</p>
                  </div>
                </div>
              </div>
              <div class="mt-4 px-4 py-2 flex items-center justify-start">
                {% if allowed_to_apply %}
                    <a href="{% url 'jobapp:apply_job_view'  job_id=job.pk  %}" class="inline-block">
                        <button class="flex items-center gap-2 px-4 py-2 font-sans text-2xl font-bold text-center text-gray-900 uppercase align-middle transition-all rounded-lg select-none text-white absolute mp-10 bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-4 py-2 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800">
                        Apply
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" class="w-4 h-4">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.25 8.25L21 12m0 0l-3.75 3.75M21 12H3"></path>
                        </svg>
                        </button>
                    </a>
                {% else %}
                    <a href="{% url 'jobapp:job_detail_view'  job_id=job.pk  %}" class="inline-block">
                      <button class="flex items-center gap-2 px-4 py-2 font-sans text-2xl font-bold text-center text-gray-900 uppercase align-middle transition-all rounded-lg select-none text-white absolute mp-10 bg-gray-500 hover:bg-gray-600 focus:ring-4 focus:outline-none focus:ring-gray-300 font-medium rounded-lg text-sm px-4 py-2 dark:bg-gray-600 dark:hover:bg-gray-700 dark:focus:ring-gray-800">
                          Applied
                      </button>
                    </a>
                {% endif %}
              </div>
            </div>
          </div>
      {% endif %}
</div>
{% endblock %}
